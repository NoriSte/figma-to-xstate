# Figma to XState

A Figma plugin to convert a Figma prototype to an XState machine.

## Why?

I trust XState not only as a powerful development tool, but also for enabling pair programming
among engineers and Product stakeholders.

Product teams do not miss much edge cases when they design
features through flowcharts and also ease a flowchart-to-XState machine conversion process. At the
same time, I think a Figma prototype to XState machine convert tool can speed up the initial
conversion process, allowing later engineering rework with or without the designers.


## Roadmap

- [x] Export Figma's frames as XState's states
- [ ] Export Figma's interactions as XState's events
  - [x] Click
  - [x] Drag
  - [ ] Key
  - [x] Mouse enter
  - [x] Mouse leave
  - [x] Mouse leave
  - [x] Mouse down
    - [x] Delay for all the mouse events
    - [ ] Delays that override each other
  - [ ] Mouse up
  - [ ] After delay
  - [ ] Set variable
- [ ] Support XState's final state type
- [ ] Support nodes nested in other other nodes
- [ ] Export Figma's interactions actions as XState's events
  - [x] Navigate
  - [ ] Change to
  - [ ] Back
  - [ ] Set variable
  - [ ] Conditional
  - [ ] ~~Scroll to~~
  - [ ] Open link
  - [ ] Open overlay
  - [ ] Swap overlay
  - [ ] Close overlay
- [ ] Support for multiple prototypes in the same page
- [ ] Support for custom prototype starting points
- [ ] Export XState V5 machine



## FAQ

*Is an XState machine to Figma prototype conversion in the roadmap?*?

No, Figma's prototypes lacks most of the XState's functionalities.

*Is a two-way sync in the roadmap after the first export?*?

No, I think tracking what happened to the XState machine after it has been exported is too hard and
Figma's prototypes lacks most of the XState's functionalities.

## Development guide

*This plugin is built with [Create Figma Plugin](https://yuanqing.github.io/create-figma-plugin/).*

### Pre-requisites

- [Node.js](https://nodejs.org) – v18
- [Figma desktop app](https://figma.com/downloads/)

### Build the plugin

To build the plugin:

```
$ npm run build
```

This will generate a [`manifest.json`](https://figma.com/plugin-docs/manifest/) file and a `build/` directory containing the JavaScript bundle(s) for the plugin.

To watch for code changes and rebuild the plugin automatically:

```
$ npm run watch
```

### Install the plugin

1. In the Figma desktop app, open a Figma document.
2. Search for and run `Import plugin from manifest…` via the Quick Actions search bar.
3. Select the `manifest.json` file that was generated by the `build` script.

### Debugging

Use `console.log` statements to inspect values in your code.

To open the developer console, search for and run `Open Console` via the Quick Actions search bar.

## See also

- [Create Figma Plugin docs](https://yuanqing.github.io/create-figma-plugin/)
- [`yuanqing/figma-plugins`](https://github.com/yuanqing/figma-plugins#readme)

Official docs and code samples from Figma:

- [Plugin API docs](https://figma.com/plugin-docs/)
- [`figma/plugin-samples`](https://github.com/figma/plugin-samples#readme)
